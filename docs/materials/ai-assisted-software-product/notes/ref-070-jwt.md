# [70] JWT（RFC 7519）：令牌不是字符串，是可审计的契约

- 原始来源：https://www.rfc-editor.org/rfc/rfc7519
- 对应章节：第 9 章（后端架构）、第 11 章（用户模块）

## 一句话摘要
JWT 定义了一种可签名/可验证的令牌格式。它的价值不在方便传递，而在把身份与权限相关的声明写成可验证、可追溯的结构。

## 产品视角：你需要它解决什么问题
- 让谁在请求可被系统可靠识别（跨服务、跨网关、跨语言栈）。
- 让会话如何失效有明确策略（过期、撤销、换设备、风控封禁）。
- 让审计与风控能关联到同一个主体与时间线（而不是靠日志猜）。

## 工程落地要点（可执行）
- 明确 claim 合同：哪些字段必须存在（subject/issuer/audience/expiry），哪些字段禁止放（敏感信息/可反推的隐私）。
- 失效策略前置：仅靠过期不够；你需要撤销与轮换路径（尤其是账号被盗/权限降级等场景）。
- 端到端可观测：把 token 相关事件做成可追溯字段（注意脱敏），把认证失败变成可定位故障。

## 常见误用提醒
- 把 JWT 当作万能安全方案：JWT 只是载体；安全来自签名验证、正确的受众/颁发者校验、以及失效策略。
- 把敏感信息塞进 payload：即便签名了也可能被泄露或被客户端读取；遵守最小化原则。
