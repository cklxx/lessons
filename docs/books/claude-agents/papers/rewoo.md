# ReWOO：先规划后观察的高效推理

原文链接： [ReWOO: Decoupling Reasoning from Observations for Efficient Augmented Language Models](https://arxiv.org/abs/2305.18323) [73]

## 论文信息
- 年份：2023 [73]
- 作者：Binfeng Xu, Zhiyuan Peng, Bowen Lei, Subhabrata Mukherjee, Yuchen Liu, Dongkuan Xu [73]
- 作者背景（研究领域）：规划与工具效率优化 [73]
- 前后血缘关系（同主题）：前序：[ReAct](react.md)；后续：无（与 ReAct 同线效率优化）

## 主旨
ReWOO 的主旨是把“规划”与“观察”解耦。模型先生成完整的推理与工具调用计划，再执行获得观察结果并填充计划，从而减少反复的思考-行动循环，提高效率与稳定性。[73]

## 背景与问题定义
论文针对传统交互式代理在“每一步都重新思考”的高成本问题：频繁的工具调用会造成延迟与费用累积，也会让上下文变得冗余。作者希望用更结构化的规划方式降低交互成本，同时保持结果质量。[73]

## 方法与机制
论文提出先输出“计划图”或步骤序列，明确每步需要的工具与依赖关系；随后执行工具调用，将结果填入计划中的占位符，最终合成答案。该机制避免了传统代理在每一步都重新规划导致的高成本，也减少了上下文中的冗余噪声。[73]

## 实验与结果
作者在知识密集与多工具任务中比较了 ReWOO 与传统交替式代理。结果显示 ReWOO 在工具调用次数、延迟与成本上更有优势，同时保持了较好的准确率。论文强调“结构化规划”可以在复杂任务中显著提升性价比。[73]
作者还指出，当任务结构相对清晰时，ReWOO 的优势最明显；而在高不确定任务中，过早冻结计划可能削弱适应性。这提示工程实践中应根据任务不确定度动态选择规划策略。[73]

## 工程启示（优化点）
- 先生成步骤化计划，明确每一步的工具与输入输出。
- 在执行阶段只填充观察结果，避免重复推理。
- 对计划图做缓存，适用于相似任务的快速复用。
- 为每一步设置可验证的中间状态，便于诊断。
- 为计划步骤设置依赖检查，提前发现空缺。

## 局限与延伸
ReWOO 假设模型能在缺乏观察的情况下生成可靠计划，这在高不确定任务中可能失效。规划一旦错误，执行阶段难以纠正，且错误会被放大到后续步骤。需要为计划设定中途重评估点，才能保证鲁棒性，对外部工具稳定性的依赖仍然明显。延伸方向包括：加入计划修正机制、在关键节点引入观察反馈、以及结合 ReAct 形成“分阶段自适应”的混合模式。[73]
