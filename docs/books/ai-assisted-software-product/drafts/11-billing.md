# 第 11 章：付费模块：订阅、计费与风控

## 本章目标

- 设计一个可运营、可对账、可扩展的商业化体系
- 把计费与权限（Entitlement）绑定，避免付费后用不了/不付费也能用
- 用 AI 辅助梳理边界条件与 Webhook 状态机，减少漏单与纠纷

## 章节结构（大纲）

### 11.1 定价与套餐（不只是一张价目表）

- 套餐维度：席位、用量、功能、存储、请求次数、模型档位
- 免费试用与转化策略

### 11.2 订阅生命周期与状态机

- 创建、升级、降级、续费、取消、宽限期、退款
- 发票与税务（视地区而定）

### 11.3 支付集成与 Webhook

- 支付服务商（如 Stripe）集成要点
- Webhook 幂等、重放、防伪签名、对账与补偿

### 11.4 Entitlement（权限开关）与用量计量

- 计量口径：请求、token、存储、席位、并发
- 防刷与风控：限额、告警、手动审核

## 本章交付物

- 套餐与权限矩阵（Entitlement Matrix）
- 订阅状态机与 Webhook 处理清单
- 对账与异常处理流程

!!! tip
    AI 提示词复制即用  
    你是 SaaS 商业化负责人。基于知识助理 SaaS，请输出：1) 3 档套餐设计（含用量/功能/定价逻辑）；2) Entitlement 矩阵；3) 订阅生命周期状态机；4) Webhook 处理与对账的边界条件清单（幂等/重试/补偿）。用 Markdown 输出。
