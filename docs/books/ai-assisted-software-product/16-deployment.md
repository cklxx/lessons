# 第 16 章：部署与运维：灰度、监控与迭代

## 本章目标

- 把“能跑”变成“可上线、可回滚、可持续迭代”
- 建立灰度发布、监控告警、故障演练与成本控制体系
- 让产品迭代与模型/提示词迭代都能被版本化管理

## 章节结构（大纲）

### 16.1 部署架构

- 应用服务、向量库、对象存储、队列、推理服务
- 环境：dev/staging/prod、配置管理与密钥管理

### 16.2 灰度发布与回滚

- Feature Flag、Canary、蓝绿部署
- 回滚策略：代码、配置、提示词、模型版本

### 16.3 监控与告警

- 应用：错误率、延迟、资源、队列堆积
- LLM：成功率、拒答率、引用命中率、成本

### 16.4 事故响应与演练

- Runbook、应急权限、数据恢复、沟通模板
- 事后复盘：根因、改进项与自动化

## 本章交付物

- 部署拓扑与依赖清单
- 灰度发布策略与回滚清单
- 监控仪表盘与告警规则草案

!!! tip "AI 提示词（复制即用）"
    你是 SRE。基于“Web SaaS + RAG/Agent”的架构，请输出：1) 部署拓扑与关键依赖；2) 灰度发布与回滚流程（含触发条件）；3) 监控指标与告警阈值建议；4) 故障 Runbook 模板。用 Markdown 输出。

