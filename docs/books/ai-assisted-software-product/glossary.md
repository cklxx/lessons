# 术语表（全书统一用法）

> 本页用于统一中英术语与本书语境下的用法约定。正文首次出现相关概念时建议链接到此页。

## 禁用/优先用法（减少概念漂移）
- 优先用「智能体」对应 Agent；避免用「代理」指代 Agent（除非明确是 network proxy）。
- 优先用「门禁」指发布/合并前的阻断检查；优先用「守门指标」指不得退化的指标阈值（guardrail metrics）。
- 优先用「证据包」指一次变更的可归档证据集合（版本组合 + 报告 + 对比 + 回滚记录）；不要用截图或口头结论替代。
- 优先用「提示注入」指通过内容劫持指令意图；优先用「越狱」指绕过安全边界与拒答策略。

<a id=agent></a>
## Agent（智能体）
**定义：** 具备目标、状态与工具接口，能在约束下推理 + 行动以完成任务的软件实体。  
**用法约定：**
- 本书统一用智能体对应 Agent；避免用代理指代 Agent（除非明确是 network proxy）。
- 讨论 Agent 时默认包含：工具白名单、权限边界、可审计日志与失败回退。

<a id=rag></a>
## RAG（检索增强生成 / Retrieval-Augmented Generation）
**定义：** 通过检索外部知识 + 生成回答降低幻觉并提升时效性的方法范式。  
**用法约定：**
- RAG 的核心是引用可追踪：答案能回指到检索到的片段（证据），而不是只看起来合理。
- 评估需区分：质量（faithfulness/relevance）与成本/延迟（独立指标）。

<a id=embedding></a>
## Embedding（嵌入 / 向量表示）
**定义：** 把文本/图片等对象映射为向量，用距离/相似度刻画语义接近程度。  
**用法约定：**
- 讨论向量检索时默认包含：切分策略、归一化、索引参数与回归评测。
- Embedding ≠ 生成模型；它通常用于检索、聚类、分类或重排序特征。

<a id=fine-tuning></a>
## Fine-tuning（微调）
**定义：** 在预训练模型基础上，用任务/领域数据继续训练以改变模型参数，使其更贴合目标分布。  
**用法约定：**
- 本书的微调优先指参数高效微调（LoRA/QLoRA 等），并要求配套评估与安全审查。
- 讨论微调必须同时写清：数据来源、许可证/合规边界、以及可复现的训练配置。

<a id=post-training></a>
## Post-training（后训练）
**定义：** 预训练之后的整体对齐与能力塑形过程，包含 SFT、偏好对齐（DPO/RLHF）与安全训练等。  
**用法约定：**
- 后训练的目标是更好用/更安全，不等同于在某任务上刷分。
- 必须有失败样本集（红队/越狱/注入）作为回归基线。

<a id=tdd></a>
## TDD（测试驱动开发 / Test-Driven Development）
**定义：** 先写失败测试（Red），再写最小实现（Green），最后重构（Refactor）的迭代开发方法。  
**用法约定：**
- 在 AI 辅助编码语境下，TDD 的关键是把失败输出（traceback/断言差异）作为下一轮提示的硬约束。

<a id=authn-authz></a>
## AuthN / AuthZ（认证 / 授权）
**定义：**
- **AuthN（认证）**：你是谁（凭证校验、过期/撤销、签名验证）。
- **AuthZ（授权）**：你能做什么（角色/范围/资源级权限）。  
**用法约定：**
- 推荐分层：入口层做 AuthN，中间件做粗粒度 AuthZ，业务层做资源级 AuthZ，并记录审计事件。

<a id=idempotency></a>
## Idempotency（幂等）
**定义：** 同一请求/事件重复执行多次，系统最终状态与执行一次等价。  
**用法约定：**
- 在 Webhook/扣费/写用量等可重试链路中，幂等的实现应依赖数据库唯一约束或等价的原子语义，避免应用层 TOCTOU。

<a id=webhook></a>
## Webhook
**定义：** 外部系统以 HTTP 回调推送事件到你的服务端入口。  
**用法约定：**
- 默认不可信输入：必须验签、落盘可重放、幂等去重，并能解释重复/乱序/延迟。

<a id=observability></a>
## Observability（可观测性）
**定义：** 通过 logs/metrics/traces 推断系统内部状态并定位问题的能力。  
**用法约定：**
- 与审计不同：可观测性回答哪里慢/哪里错，审计回答谁在何时做了什么。

<a id=audit-log></a>
## Audit log（审计日志）
**定义：** 记录关键操作（身份、权限、计费、管理操作等）的不可抵赖证据链。  
**用法约定：**
- 至少包含：操作者、时间、动作、资源、结果、请求标识（request_id/trace_id）。

<a id=datasheet></a>
## Datasheet（数据卡片 / 数据说明书）
**定义：** 描述一个数据集是什么、从哪来、能怎么用的元数据文档。典型字段包含：来源、采集时间、许可证、用途限制、清洗/过滤步骤、质量统计、版本号与责任人。[34]  
**用法约定：**
- 本书统一用数据卡片（Datasheet）指代 dataset-level 的说明文档；避免把它写成数据表格/字段清单。
- 数据卡片要与数据版本绑定：变更数据时同步更新卡片，并能回答这次训练用了哪些数据。[34]
- 与 Model Card 的区别：数据卡片描述数据；模型卡描述模型训练、评估与限制（两者都应可审计）。

<a id=model-card></a>
## Model Card（模型卡片）
**定义：** 描述一个模型是什么、怎么训练的、效果如何、有哪些限制/风险的说明文档。典型字段包含：模型版本、训练数据概览与许可、训练配置、评测结果、安全与合规注意事项、适用场景与已知局限。  
**用法约定：**
- 本书默认要求：每次发布的模型版本都应配套更新模型卡，且能追溯到训练所用数据版本（数据卡片）。[34][45]

<a id=token></a>
## Token（词元）
**定义：** 分词器（Tokenizer）把文本切分后的最小单位；模型以 token 为基本处理粒度。  
**用法约定：**
- 本书首次出现会写作 token（词元）；后续可直接用 token。
- 讨论长度/成本时优先用 token 数作为口径（例如 P50/P95 分位数、tokens/step）。[39]

<a id=oov></a>
## OOV（词表外 / Out-of-Vocabulary）
**定义：** 分词器词表中不存在、需要用回退规则或更细粒度拆分才能表示的 token。  
**用法约定：**
- 本书写作词表外（OOV）率，用于衡量分词器对目标语料的覆盖度与压缩效率。[38]

<a id=contract-first></a>
## Contract-first（合同优先 / OpenAPI）
**定义：** 先定义接口契约（资源、错误模型、幂等语义、版本策略），再实现服务与生成 SDK。  
**用法约定：**
- 契约变更必须可审计，并提供 breaking change 检查作为合并卡点。

<a id=version-set></a>
## Version Set（版本组合）
**定义：** 一次发布/评测所依赖的全部版本对象的唯一组合（代码/配置/数据快照/索引/模型/提示等）。  
**用法约定：**
- 本书讨论上线、灰度与回滚时，版本组合是最小原子；不要用只改了点配置这类说法替代。
- 版本组合必须能落到可追溯字段（commit、hash、snapshot_id 等），并进入证据包与审计。

<a id=evidence-pack></a>
## Evidence Pack（证据包）
**定义：** 用于裁决一次变更是否通过的一组可归档证据（报告、对比表、关键日志/trace_id、门禁结论与回滚记录）。  
**用法约定：**
- 证据包必须能回答：我改了什么、用的什么版本组合、怎么验证、失败怎么判、怎么回滚。
- 优先固定目录与固定字段集合；不要用截图或口头描述替代可复跑输出。

<a id=baseline></a>
## Baseline（基线）
**定义：** 用于对比评估系统表现的参考标准（通常是上一稳定版本或已接受方案）。  
**用法约定：**
- 任何优化先确立基线：同一批样本、同一口径、同一报告，再谈提升。
- 灰度与回归里的基线默认指上一稳定版本组合；基线缺失时，不宣称优化。

<a id=gate></a>
## Gate（门禁）
**定义：** 发布/合并前的阻断检查点，按预设阈值裁决通过/失败（失败即阻断）。  
**用法约定：**
- 门禁必须有可执行动作与可留档输出（报告/对比表/日志摘要），而不是形容词结论。
- 不要把人工评审纪要当门禁；至少要能一键复跑并得到同口径结论。

<a id=guardrail-metrics></a>
## Guardrail Metrics（守门指标 / 护栏指标）
**定义：** 主指标之外必须守住的指标阈值（如成本、延迟、越权率、错误率）；越界即暂停/降级/回滚。  
**用法约定：**
- 守门指标用于约束取舍：主指标提升不能以守门指标越界为代价。
- 与运行时护栏不同：这里的护栏指指标阈值与越界动作，不指输入输出过滤器。

<a id=regression-set></a>
## Regression Set（回归集）
**定义：** 用于验证变更不引入退化的一组固定样本与判定口径（含阻断级样本）。  
**用法约定：**
- 至少包含：黄金链路样本、历史事故复发样本、边界/攻击样本。
- 回归集必须版本化；新增失败样本应进入回归并写清最小复现与修复验证。

<a id=percentile></a>
## P95 / Percentile（P95 / 分位数）
**定义：** P95 表示 95% 的样本数值小于或等于该阈值，常用于描述长尾性能（延迟、成本、tokens）。  
**用法约定：**
- 讨论性能与成本时避免只报平均值；至少给出 P50 与 P95（必要时 P99）。
- 分位数必须说明样本窗口与分桶口径（入口/租户/输入长度），避免用混合分布误导结论。

<a id=red-team></a>
## Red Team（红队）
**定义：** 以对抗者视角设计与执行攻击/压力用例，验证系统边界是否可被突破的实践。  
**用法约定：**
- 红队用例应进入阻断级回归：命中即阻断发布，并要求最小复现与修复证据。
- 红队不只覆盖安全，也覆盖幻觉、证据不足、预算失控与工具滥用等高后果场景。

<a id=prompt-injection></a>
## Prompt Injection（提示注入）
**定义：** 通过输入内容或检索内容劫持指令意图，诱导模型忽略边界与合同的攻击方式。  
**用法约定：**
- 注入属于不可信输入处理问题：必须在系统与工具层做隔离与校验，而不是只在提示词里说不要。
- 与越狱区分：注入侧重劫持控制流；越狱侧重绕过拒答与安全边界。

<a id=jailbreak></a>
## Jailbreak（越狱）
**定义：** 通过提示策略诱导模型绕过安全对齐与拒答策略，输出本应被阻断的内容或行动。  
**用法约定：**
- 中文语境统一使用越狱；英文语境可用 Jailbreak。
- 越狱样本应进入攻击集与回归：命中即阻断，并要求补齐拒答/降级/审计口径。

<a id=feature-flag></a>
## Feature Flag（特性开关）
**定义：** 用配置开关实现发布与部署解耦，可对功能/模型/提示策略按人群灰度与回滚。  
**用法约定：**
- 默认把回滚当作开关动作的一部分：越界时按表关闭或回退到上一稳定版本组合。
- 与版本组合配合使用：开关决定路由，版本组合决定行为可追溯。

<a id=slo></a>
## SLO（服务等级目标 / Service Level Objective）
**定义：** 对关键体验指标设定的量化目标（例如 99% 的请求在 2s 内给出首段可用信息）。  
**用法约定：**
- SLO 优先以用户体验口径定义（端到端、含排队与上游），而不是只看模型推理耗时。
- 违背 SLO 的错误预算应触发降级、暂停变更或回滚，而不是继续扩量。

<a id=ledger></a>
## Ledger（账本）
**定义：** 用于记录计费/配额等高价值事件的不可变事实源（append-only，只能冲正/补记）。  
**用法约定：**
- 账本是对账与争议处理的事实基础；不能用可变汇总表替代。
- 关键链路需要幂等去重与可重放，避免重试/重复回调导致重复计费。

<a id=reversal-credit-note></a>
## Reversal / Credit Note（冲正 / 补记）
**定义：** 用事件记录纠错而不改历史：冲正用于撤销错误流水；补记用于向用户返还额度或抵扣费用。  
**用法约定：**
- 严禁直接修改历史金额字段；所有纠错必须通过新事件留痕，保证账本可追溯。
- 冲正与补记需要与原事件关联（如 reverses_event_id），并进入对账与回归用例。

<a id=llm-as-a-judge></a>
## LLM-as-a-Judge（模型裁判）
**定义：** 用一个裁判模型按固定口径对候选输出打分/排序/对比，以支持回归与门禁自动裁决。  
**用法约定：**
- 优先使用成对比较 + 交换位置去偏；争议样本应进入人工复审或加评审。
- 裁判配置必须版本化（model_id/prompt_id/规则），避免换裁判导致口径漂移。

<a id=ragas></a>
## RAGAS
**定义：** 用于评估 RAG 管道的指标与工具体系，常见指标包含 faithful/relevant 等维度。  
**用法约定：**
- 本书统一使用 RAGAS（不翻译）；阈值应以基线与可接受风险为参照设置。
- 只用离线分数不够：应结合线上守门指标与失败样本回流做闭环。

<a id=rbac></a>
## RBAC（基于角色的访问控制）
**定义：** 通过角色聚合权限，再把角色分配给主体的访问控制模型。  
**用法约定：**
- 本书正文可用 RBAC 作为 0→1 的起步模型，并强调资源级校验与租户隔离。
- 角色与动作集合必须可审计可回滚；变更应进入灰度与回归。

<a id=abac></a>
## ABAC（基于属性的访问控制）
**定义：** 基于主体/资源/环境属性动态计算授权结果的访问控制模型。  
**用法约定：**
- 用于更细粒度或规则更复杂的授权场景；但同样需要资源级校验与审计字段。
- 不要把复杂规则藏在代码里：策略应版本化，并配套回归用例与回滚路径。
